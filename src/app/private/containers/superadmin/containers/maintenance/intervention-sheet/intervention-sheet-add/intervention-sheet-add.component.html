<div class="col-md-10">
  <div class="app-page-title">
    <div class="page-title-wrapper">
      <div class="page-title-heading" style="width: 100%;">
        <div class="page-title-icon">
          <i _ngcontent-lhs-c2="" class="metismenu-icon pe-7s-users"></i>
        </div>
        <div>Saisir des ordres de mission
          <div class="page-title-subheading">saisie
          </div>
        </div>
      </div>
    </div>
  </div>

  <br>
  <div class="col-md-10 ml-2">
    <mat-accordion class="example-headers-align">
      <form [formGroup]="myformGroup">
        <mat-expansion-panel [expanded]="step === 0" (opened)="setStep(0)" hideToggle>
          <mat-expansion-panel-header>
            <mat-panel-title>
              General
            </mat-panel-title>
            <mat-panel-description>
              Renseigner les informations
            </mat-panel-description>
          </mat-expansion-panel-header>
          <div class="row">
            <div class="col-md-12">
              <div class="row">
                <div class="col-md-6">
                  <mat-form-field class="example-full-width">
                    <mat-label>Numero de la Fiche </mat-label>
                    <input matInput placeholder="4474E" formControlName="num_fiche" required>
                  </mat-form-field>
                </div>
                <div class="col-md-6">
                  <mat-form-field class="example-full-width">
                    <mat-label>Vehicule</mat-label>
                    <mat-select formControlName="car_id" (change)=getRemorque($event)>
                      <mat-option *ngFor="let car of cars" [value]="car.stepper_id" title="title">
                        {{car.registration}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <mat-form-field class="example-full-width">
                    <mat-label>Index </mat-label>
                    <input matInput placeholder="4474E" formControlName="index" required>
                  </mat-form-field>
                </div>
                <div class="col-md-6">
                  <mat-form-field class="example-full-width">
                    <mat-label>Degre Urgence</mat-label>
                    <mat-select formControlName="degre_urgen">
                      <mat-option value="Degre 1" title="title">
                        Degre 1
                      </mat-option>
                      <mat-option value="Degre 2" title="title">
                        Degre 2
                      </mat-option>
                      <mat-option value="Degre 3" title="title">
                        Degre 3
                      </mat-option>
                    </mat-select>
                    <!-- <input matInput placeholder="Last name, First name" formControlName="nationality_id" required> -->
                  </mat-form-field>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <mat-form-field class="example-full-width">
                    <mat-label>Date de demande</mat-label>
                    <input matInput type="date" placeholder="12" formControlName="date_demande" required>
                  </mat-form-field>
                </div>
                <div class="col-md-6">
                  <mat-form-field class="example-full-width">
                    <mat-label>Date intervention</mat-label>
                    <input matInput type="date" placeholder="12" formControlName="date_intervention" required>
                  </mat-form-field>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <h5 style="color: green;">Type Intervention</h5>
                  <mat-radio-group aria-label="Select an option" formControlName="type_intervention">
                    <mat-radio-button value="1"> Preventive</mat-radio-button>
                    <p> </p>
                    <mat-radio-button value="2">Corrective</mat-radio-button>
                  </mat-radio-group>
                </div>
                <div class="col-md-6">
                  <mat-form-field class="example-full-width">
                    <mat-label>Observation</mat-label>
                    <textarea matInput placeholder="Entrez une description" formControlName="observations"
                      required></textarea>
                  </mat-form-field>
                </div>
              </div>
            </div>
          </div>
          <mat-action-row>
            <button mat-button color="primary" (click)="nextStep()">Next</button>
          </mat-action-row>
        </mat-expansion-panel>


        <mat-expansion-panel [expanded]="step === 1" (opened)="setStep(1)" hideToggle>
          <mat-expansion-panel-header>
            <mat-panel-title>
              Timing
            </mat-panel-title>
            <mat-panel-description>
              Renseigner les informations
            </mat-panel-description>
          </mat-expansion-panel-header>
          <br>
          <div class="row">
            <div class="col-md-4">
              <mat-form-field class="example-full-width">
                <mat-label>Date Debut</mat-label>
                <input matInput type="date" placeholder="Ex. 1 Main St, New York, NY" formControlName="date_debut"
                  required>
              </mat-form-field>
            </div>
            <div class="col-md-4">
              <mat-form-field class="example-full-width">
                <mat-label>Heure Debut</mat-label>
                <input matInput placeholder="Ex. 1 Main St, New York, NY" formControlName="heure_debut" required>
              </mat-form-field>
            </div>
            <div class="col-md-4">
              <mat-form-field class="example-full-width">
                <mat-label>Temps reel alloué</mat-label>
                <input matInput placeholder="Ex. 1 Main St, New York, NY" formControlName="temps_reel" required>
              </mat-form-field>
            </div>
          </div>
          <div class="row">
            <div class="col-md-4">
              <mat-form-field class="example-full-width">
                <mat-label>Date Fin</mat-label>
                <input matInput type="date" placeholder="Ex. 1 Main St, New York, NY" formControlName="date_fin"
                  required>
              </mat-form-field>
            </div>
            <div class="col-md-4">
              <mat-form-field class="example-full-width">
                <mat-label>Heure Fin</mat-label>
                <input matInput placeholder="Ex. 1 Main St, New York, NY" formControlName="heure_fin" required>
              </mat-form-field>
            </div>
            <div class="col-md-4">
              <mat-form-field class="example-full-width">
                <mat-label>Temps d'indispo</mat-label>
                <input matInput placeholder="Ex. 1 Main St, New York, NY" formControlName="temps_indispo" required>
              </mat-form-field>
            </div>
          </div>
          <mat-action-row>
            <button mat-button color="warn" (click)="prevStep()">Previous</button>
            <button mat-button color="primary" (click)="nextStep()">Next</button>
          </mat-action-row>
        </mat-expansion-panel>
      </form>
      <mat-expansion-panel [expanded]="step === 2" (opened)="setStep(2)" hideToggle>
        <mat-expansion-panel-header>
          <mat-panel-title>
            Interventions
          </mat-panel-title>
          <mat-panel-description>
            ajouter les differentes interventions
          </mat-panel-description>
        </mat-expansion-panel-header>
        <br>
        <div class="row">
        </div>
        <div class="table-responsive">
          <table class="table table-bordered table-hover" style="width: 100%;">
            <thead>
              <tr>
                <th>Interventions</th>
                <th>Organe</th>
                <th>Intervenant</th>
                <th>Cout Main d'ouvre</th>
                <th>Fait</th>
                <th>Durée</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <mat-form-field class="example-full-width">
                    <mat-label>Intervention</mat-label>
                    <mat-select [(ngModel)]="this.gamme_interv">
                      <mat-option *ngFor="let gamme of gamme_interventions" [value]="gamme.id" title="title">
                        {{gamme.name |uppercase}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </td>
                <td>
                  <mat-form-field class="example-full-width">
                    <mat-label>Organe</mat-label>
                    <input matInput placeholder="" [(ngModel)]="this.organe">
                  </mat-form-field>
                </td>
                <td>
                  <mat-form-field class="example-full-width">
                    <mat-label>Intervenant</mat-label>
                    <input matInput placeholder="" [(ngModel)]="this.intervenant">
                  </mat-form-field>
                </td>
                <td>
                  <mat-form-field class="example-full-width">
                    <mat-label>cout</mat-label>
                    <input matInput placeholder="" [(ngModel)]="this.cout_main_ouvre">
                  </mat-form-field>
                </td>
                <td>
                  <mat-form-field class="example-full-width">
                    <mat-label>Fait</mat-label>
                    <input matInput placeholder="" [(ngModel)]="this.fait">
                  </mat-form-field>
                </td>
                <td>
                  <mat-form-field class="example-full-width">
                    <mat-label>Duree</mat-label>
                    <input matInput placeholder="" [(ngModel)]="this.duree">
                  </mat-form-field>
                </td>
                <td>
                  <button class="btn btn-success" (click)="addCargaison()">Add</button>
                </td>
              </tr>

              <tr *ngFor="let intervention of cargaisons,let index=index">
                <td>
                  <mat-form-field class="example-full-width">
                    <mat-label>Intervention</mat-label>
                    <mat-select [(ngModel)]="intervention.range_id">
                      <mat-option *ngFor="let gamme of gamme_interventions" [value]="gamme.id" title="title">
                        {{gamme.name |uppercase}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </td>
                <td>
                  <mat-form-field class="example-full-width">
                    <mat-label>Organe</mat-label>
                    <input matInput placeholder="Ex. 1 Main St, New York, NY" [(ngModel)]="intervention.organ"
                      required>
                  </mat-form-field>
                </td>
                <td>
                  <mat-form-field class="example-full-width">
                    <mat-label>Intervenant</mat-label>
                    <input matInput placeholder="Ex. 1 Main St, New York, NY" [(ngModel)]="intervention.speaker" required>
                  </mat-form-field>
                </td>
                <td>
                  <mat-form-field class="example-full-width">
                    <mat-label>cout</mat-label>
                    <input matInput placeholder="Ex. 1 Main St, New York, NY" [(ngModel)]="intervention.cost_maintenance" required>
                  </mat-form-field>
                </td>
                <td>
                  <mat-form-field class="example-full-width">
                    <mat-label>Fait</mat-label>
                    <input matInput placeholder="Ex. 1 Main St, New York, NY" [(ngModel)]="intervention.does" required>
                  </mat-form-field>
                </td>
                <td>
                  <mat-form-field class="example-full-width">
                    <mat-label>Duree</mat-label>
                    <input matInput placeholder="Ex. 1 Main St, New York, NY" [(ngModel)]="intervention.duration"
                      required>
                  </mat-form-field>
                </td>
                <td>
                  <button class="btn btn-danger btn-sm" (click)="deleteCargaison(index)">delete</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <mat-action-row>
          <button mat-button color="warn" (click)="prevStep()">Previous</button>
          <button mat-button color="primary" (click)="add()">Enregistrer</button>
        </mat-action-row>
      </mat-expansion-panel>
    </mat-accordion>
  </div>
</div>